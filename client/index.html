<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1" />
    <title>All'Arco Venice - Luxury Apartments</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Cdefs%3E%3ClinearGradient id='bg' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' style='stop-color:%23334155'/%3E%3Cstop offset='50%25' style='stop-color:%231e3a8a'/%3E%3Cstop offset='100%25' style='stop-color:%233730a3'/%3E%3C/linearGradient%3E%3C/defs%3E%3Crect width='32' height='32' rx='8' fill='url(%23bg)'/%3E%3Cpath d='M8 24 L16 8 L24 24 M12 20 L20 20' stroke='white' stroke-width='2.5' stroke-linecap='round' stroke-linejoin='round'/%3E%3Cpath d='M10 24 Q16 18 22 24' stroke='white' stroke-width='1.5' stroke-linecap='round' fill='none' opacity='0.7'/%3E%3Ccircle cx='16' cy='12' r='1' fill='white' opacity='0.8'/%3E%3C/svg%3E">
    
    <!-- Apple Touch Icon -->
    <link rel="apple-touch-icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 180 180'%3E%3Cdefs%3E%3ClinearGradient id='bg' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' style='stop-color:%23334155'/%3E%3Cstop offset='50%25' style='stop-color:%231e3a8a'/%3E%3Cstop offset='100%25' style='stop-color:%233730a3'/%3E%3C/linearGradient%3E%3C/defs%3E%3Crect width='180' height='180' rx='45' fill='url(%23bg)'/%3E%3Cpath d='M45 135 L90 45 L135 135 M67.5 112.5 L112.5 112.5' stroke='white' stroke-width='14' stroke-linecap='round' stroke-linejoin='round'/%3E%3Cpath d='M56.25 135 Q90 101.25 123.75 135' stroke='white' stroke-width='8.5' stroke-linecap='round' fill='none' opacity='0.7'/%3E%3Ccircle cx='90' cy='67.5' r='5.5' fill='white' opacity='0.8'/%3E%3C/svg%3E">
    
    <!-- Meta tags for SEO and social sharing -->
    <meta name="description" content="Experience authentic Venetian luxury at All'Arco Apartment in the heart of Venice. Premium 2-bedroom accommodation with canal views and modern amenities." />
    <meta name="keywords" content="Venice apartment, luxury accommodation, vacation rental, canal view, St. Mark's Square" />
    
    <!-- Open Graph tags -->
    <meta property="og:title" content="All'Arco Venice - Luxury Apartments" />
    <meta property="og:description" content="Experience authentic Venetian luxury in the heart of the floating city" />
    <meta property="og:type" content="website" />
    
    <!-- Theme color for mobile browsers -->
    <meta name="theme-color" content="#1e3a8a" />
    
    <!-- Cache control headers -->
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
  </head>
  <body>
    <div id="root"></div>
    
    <!-- AGGRESSIVE CACHE BUST AND WEBSOCKET BLOCKING -->
    <script>
      // Block ANY old WebSocket connections immediately
      const originalWebSocket = window.WebSocket;
      
      window.WebSocket = function(url, protocols) {
        console.log('WebSocket connection attempt:', url);
        
        // Block old invalid connections
        if (url.includes('?token=') || url.includes('undefined') || url.endsWith('/?token=')) {
          console.warn('ðŸš« BLOCKED old WebSocket connection:', url);
          // Return a fake WebSocket that immediately closes
          return {
            readyState: WebSocket.CLOSED,
            close: function() {},
            send: function() {},
            addEventListener: function() {},
            removeEventListener: function() {}
          };
        }
        
        // Allow new proper connections
        return new originalWebSocket(url, protocols);
      };
      
      // Copy constants
      window.WebSocket.CONNECTING = originalWebSocket.CONNECTING;
      window.WebSocket.OPEN = originalWebSocket.OPEN;
      window.WebSocket.CLOSING = originalWebSocket.CLOSING;
      window.WebSocket.CLOSED = originalWebSocket.CLOSED;
      
      // Clear all caches
      if ('caches' in window) {
        caches.keys().then(function(names) {
          names.forEach(function(name) {
            caches.delete(name);
          });
        });
      }
      
      // Clear localStorage of any old WebSocket tokens
      try {
        Object.keys(localStorage).forEach(key => {
          if (key.includes('websocket') || key.includes('token')) {
            localStorage.removeItem(key);
          }
        });
      } catch(e) {}
      
      console.log('ðŸ”„ Cache cleared, WebSocket blocking active');
    </script>
    
    <script type="module" src="/src/main.tsx?v=2024-cache-bust"></script>
  </body>
</html>